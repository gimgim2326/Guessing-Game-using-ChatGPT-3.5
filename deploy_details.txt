Install Apps:
sudo apt update
sudo apt install python3
sudo apt-get install -y python3-venv
sudo apt install -y python-pip

Disable Firewall:
sudo ufw disable

Clone Repository:
git clone https://token@github.com/gimgim2326/a5-group3-game.git

Go to Folder:
cd a5-group3-game

Create API Key file:
sudo nano api_key.txt
Insert API

Go to Virtual Environment:
python3 -m venv menv
source ./menv/bin/activate

Install Libraries:
pip3 install flask
pip3 install gunicorn
pip3 install openai

Test Execution:
python3 wsgi.py
gunicorn -w 4 --bind 0.0.0.0:8000 wsgi:app

Exit VM:
deactivate

Create Gunicorn Socket:
sudo mkdir /tmp/game/

Create Service:
sudo nano /etc/systemd/system/game.service

Description=Guessing Game
After=network.target

[Service]
User=ubuntu
Group=www-data
WorkingDirectory=/home/ubuntu/a5-group3-game
Environment="PATH=/home/ubuntu/a5-group3-game/menv/bin"
ExecStart=/bin/bash -c 'source /home/ubuntu/a5-group3-game/menv/bin/activate; gunicorn -w 3 --bind unix:/tmp/game/gunicorn.sock wsgi:app'
Restart=always

[Install]
WantedBy=multi-user.target

Enable Service:
sudo systemctl enable game --now

Command to know which socket is working:
sudo systemctl status game.service

Install Nginx:
sudo apt install nginx

sudo nano /etc/nginx/sites-available/game

server {
    listen 80;
    server_name gsdelapena-a5.is215.abriol.net;
    location / {
        include proxy_params;
        proxy_pass http://unix:/tmp/game/gunicorn.sock;
    }
}

sudo nginx -t

sudo ln -s /etc/nginx/sites-available/game /etc/nginx/sites-enabled/
sudo ls -l  /etc/nginx/sites-enabled/

Permissions:
sudo chmod 775 /home/ubuntu/
sudo chmod 775 /tmp/game/

Enable Nginx:
sudo systemctl enable nginx
sudo nginx -s reload